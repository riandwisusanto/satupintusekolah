const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormRole-C4l8jeHQ.js","assets/vue-CzxLGHcz.js","assets/vue-G0OklSQi.css","assets/FormInput-FOWoX8TM.js","assets/app-BZL2lnh6.js","assets/app-BoOM07v4.css","assets/FormInput-AW6_rvBH.css","assets/FormRole-XxfxysMz.css"])))=>i.map(i=>d[i]);
import{c as e,g as s,a,e as l,b as t,f as n}from"./app-BZL2lnh6.js";import{a as o,f as i,m as r,h as d,j as u,p as c,t as p,r as v,u as b,N as m,F as f,o as h}from"./vue-CzxLGHcz.js";const y={class:"content"},g={class:"card"},k={class:"position-relative"},_={key:0},w={key:1},C={class:"btn-group"},R=["onClick"],x=["onClick"],j={__name:"index",setup(j){const D=m(()=>n(()=>import("./FormRole-C4l8jeHQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),P=o();e();const S=o(!1),A=o(null),E=o(!1),F=[{field:"label",display:"Role"},{field:"users",display:"Pengguna",sortable:!1},{field:"action",display:"Action",sortable:!1}],O=()=>{A.value=null,S.value=!0},T=async e=>{s("save").then(async s=>{var n;if(s.isConfirmed){E.value=!0;let s="roles";e.id&&(s=`roles/${e.id}`);const{ok:o,data:i,error:r}=await a(s,{method:e.id?"put":"post",body:{name:e.label,permissions:e.permissions}});o?(l("Role berhasil "+(e.id?"diubah":"ditambahkan")),S.value=!1,null==(n=P.value)||n.reload()):t(r),E.value=!1}})};return(e,n)=>{const o=v("TableServerSide");return h(),i(f,null,[n[3]||(n[3]=r("section",{class:"content-header"},[r("h5",{class:"text-center"},"Developer Permission")],-1)),r("section",y,[r("div",g,[r("div",k,[d(o,{ref_key:"tableRef",ref:P,title:"","show-add-button":!0,"show-drawer":!0,columns:F,"initial-sort":{field:"code",order:"desc"},per_page:10,endpoint:"roles",extra:{with:"users,permissions"},loading:E.value,onOpenDrawer:O},{"cell-users":u(({row:e})=>[0==e.users.length?(h(),i("span",_,"-")):(h(),i("span",w,p(e.users.length),1))]),"cell-action":u(({row:e})=>[r("div",C,[r("button",{class:"btn btn-primary btn-sm",type:"button",onClick:c(s=>(e=>{A.value=e,S.value=!0})(e),["stop","prevent"])},[...n[1]||(n[1]=[r("i",{class:"fas fa-edit"},null,-1)])],8,R),r("button",{class:"btn btn-danger btn-sm",type:"button",onClick:c(n=>(async e=>{s("delete").then(async s=>{var n;if(s.isConfirmed){const{ok:s,data:o,error:i}=await a(`roles/${e}`,{method:"delete"});s?(l("Role berhasil dihapus"),null==(n=P.value)||n.reload()):t(i)}})})(e.id),["stop","prevent"])},[...n[2]||(n[2]=[r("i",{class:"fas fa-trash"},null,-1)])],8,x)])]),_:1},8,["loading"]),d(b(D),{visible:S.value,"onUpdate:visible":n[0]||(n[0]=e=>S.value=e),selected:A.value,class:"fixed top-0 right-0 z-50",onSave:T},null,8,["visible","selected"])])])])],64)}}};export{j as default};
