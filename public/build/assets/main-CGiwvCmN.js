import a from"./TopBar-Cptwg4I3.js";import s from"./Sidebar-Dndu2lEQ.js";import r from"./Footer-C2SY5F0S.js";import{_ as e,u as o,a as t,b as n}from"./app-BXNMZXLM.js";import{a as i,e as l,u,b as c,f as m,s as p,h as v,r as f,C as d,F as g,o as j}from"./vue-DNxxE8NJ.js";import y from"./ProgressBar-wtlRH1EN.js";import"./UserProfileDropDown-34XXdDNf.js";import"./logo-jago-DWBj5E3U.js";const b={key:0,class:"flex items-center justify-center h-screen"},k={key:1},_={class:"content-wrapper"},w=e({__name:"main",setup(e){const w=u(),h=o(),B=i(!0),x=i("");l(async()=>{await(async()=>{const{ok:a,data:s,error:r}=await t("me");if(!a)return n(r),void w.push({name:"Login"});const{user:e}=s.data;h.setUser({user:e,permissions:e.permissions}),B.value=!1})(),await(async()=>{const{ok:a,data:s}=await t("configurations/background_image");a&&(x.value=`/storage/${s.data.background_image}`)})()});const D=i(null);w.beforeEach((a,s,r)=>{var e;null==(e=D.value)||e.start(),r()}),w.afterEach(()=>{var a;null==(a=D.value)||a.finish()});const E=c(()=>x.value?{backgroundImage:`url(${x.value})`}:{});return(e,o)=>{const t=f("RouterView");return j(),m(g,null,[p(y,{ref_key:"progressBar",ref:D},null,512),B.value?(j(),m("div",b,[...o[0]||(o[0]=[v("span",null,"Loading...",-1)])])):(j(),m("div",k,[p(a),p(s),v("div",{class:"content-area",style:d(E.value)},[o[1]||(o[1]=v("div",{class:"overlay"},null,-1)),v("div",_,[p(t)])],4),p(r)]))],64)}}},[["__scopeId","data-v-e29c4fb3"]]);export{w as default};
