import a from"./TopBar-VK1Imk2t.js";import s from"./Sidebar-DJGTXme9.js";import r from"./Footer-DsLOlMG0.js";import{_ as e,u as o,a as t,b as n}from"./app-DtFZzPME.js";import{a as i,e as l,u,b as c,f as m,s as p,h as f,r as v,M as d,F as g,o as j}from"./vue-zlSXZogm.js";import y from"./ProgressBar-3sKqK6p1.js";import"./UserProfileDropDown-aajelLmQ.js";import"./logo-jago-DWBj5E3U.js";const k={key:0,class:"flex items-center justify-center h-screen"},w={key:1},_={class:"content-wrapper"},b=e({__name:"main",setup(e){const b=u(),h=o(),x=i(!0),B=i("");l(async()=>{await(async()=>{const{ok:a,data:s,error:r}=await t("me");if(!a)return n(r),void b.push({name:"Login"});const{user:e}=s.data;h.setUser({user:e,permissions:e.permissions}),x.value=!1})(),await(async()=>{const{ok:a,data:s}=await t("configurations/background_image");a&&(B.value=`/storage/${s.data.background_image}`)})()});const D=i(null);b.beforeEach((a,s,r)=>{var e;null==(e=D.value)||e.start(),r()}),b.afterEach(()=>{var a;null==(a=D.value)||a.finish()});const E=c(()=>B.value?{backgroundImage:`url(${B.value})`}:{});return(e,o)=>{const t=v("RouterView");return j(),m(g,null,[p(y,{ref_key:"progressBar",ref:D},null,512),x.value?(j(),m("div",k,[...o[0]||(o[0]=[f("span",null,"Loading...",-1)])])):(j(),m("div",w,[p(a),p(s),f("div",{class:"content-area",style:d(E.value)},[o[1]||(o[1]=f("div",{class:"overlay"},null,-1)),f("div",_,[p(t)])],4),p(r)]))],64)}}},[["__scopeId","data-v-c47f748f"]]);export{b as default};
