import{a as e,b as l,w as a,f as t,h as i,B as s,g as u,s as d,t as o,q as r,T as n,o as p,i as c,j as m}from"./vue-DNxxE8NJ.js";import{_ as f}from"./app-laDEkNiO.js";const v={class:"file-upload"},g=["id","required","disabled"],b=["for"],y={key:0,class:"text-red-500"},V={key:0,class:"mt-2"},h=["src"],k=["href"],j={key:0,class:"text-red-500 text-sm mt-1"},w={class:"fullscreen-content"},x=["src"],F=["src"],_=f({__name:"FileUpload",props:{modelValue:{type:[File,String,null],default:null},label:{type:String,default:"Upload File"},id:{type:String,default:()=>`file-input-${Math.random().toString(36).substr(2,9)}`},required:{type:Boolean,default:!1},accept:{type:String,default:"jpeg,jpg,png,pdf"},allowPreview:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(f,{emit:_}){const q=f,C=_,U=e(null),B=e(""),S=e(!1);e(null);const $=e=>"undefined"!=typeof File&&e instanceof File,I=l(()=>q.modelValue?$(q.modelValue)?URL.createObjectURL(q.modelValue):q.modelValue:null),M=l(()=>q.modelValue?$(q.modelValue)?q.modelValue.name:q.modelValue.split("/").pop():null),P=l(()=>!!q.modelValue&&($(q.modelValue)?q.modelValue.type.startsWith("image/"):/\.(png|jpe?g|gif|webp)$/i.test(q.modelValue))),D=l(()=>!!q.modelValue&&($(q.modelValue)?"application/pdf"===q.modelValue.type:/\.pdf$/i.test(q.modelValue))),L=e=>{var l;const a=(null==(l=e.target.files)?void 0:l[0])||null;a&&"application/pdf"===a.type&&a.size>10485760?B.value="Ukuran file PDF tidak boleh lebih dari 10MB":(C("update:modelValue",a),B.value="")},R=e=>{B.value=e.target.validationMessage};a(()=>q.modelValue,e=>{U.value&&(q.required&&!e?U.value.setCustomValidity("File wajib diupload"):U.value.setCustomValidity(""))},{immediate:!0});const z=()=>{var e;q.disabled||null==(e=U.value)||e.click()},N=async()=>{S.value=!0},O=()=>{S.value=!1};return(e,l)=>(p(),t("div",v,[i("input",{id:f.id,ref_key:"fileInput",ref:U,type:"file",class:"hidden",accept:"image/jpeg,image/png,image/jpg,application/pdf",required:f.required&&!I.value,disabled:f.disabled,onChange:L,onInvalid:R},null,40,g),s(e.$slots,"trigger",{id:f.id,open:z},()=>[i("label",{for:f.id,class:"cursor-pointer px-4 border rounded bg-white-100 hover:bg-white-200"},[c(o(f.label)+" ",1),f.required?(p(),t("span",y,"*")):u("",!0)],8,b)],!0),s(e.$slots,"preview",{fileUrl:I.value,fileName:M.value,isImage:P.value},()=>[I.value?(p(),t("div",V,[P.value?(p(),t("img",{key:0,src:I.value,alt:"preview",class:"w-24 h-24 object-cover rounded border cursor-pointer",onClick:m(N,["stop"])},null,8,h)):D.value?(p(),t("div",{key:1,class:"w-24 h-24 flex items-center justify-center border rounded bg-gray-50 cursor-pointer",onClick:N},[...l[0]||(l[0]=[i("span",{class:"text-sm text-gray-600"},"PDF",-1)])])):(p(),t("a",{key:2,href:I.value,target:"_blank",class:"text-blue-600 underline"},o(M.value),9,k))])):u("",!0)],!0),B.value?(p(),t("p",j,o(B.value),1)):u("",!0),d(n,{name:"fade"},{default:r(()=>[S.value?(p(),t("div",{key:0,class:"fullscreen-overlay",onClick:m(O,["self"])},[i("div",w,[i("button",{type:"button",class:"btn btn-sm btn-light close-btn",onClick:O}," âœ• "),P.value?(p(),t("img",{key:0,src:I.value,alt:"fullscreen-preview",class:"img-fluid",style:{"max-height":"90vh","object-fit":"contain"}},null,8,x)):D.value?(p(),t("iframe",{key:1,src:I.value,class:"pdf-frame"},null,8,F)):u("",!0)])])):u("",!0)]),_:1})]))}},[["__scopeId","data-v-c7d7d737"]]);export{_ as default};
