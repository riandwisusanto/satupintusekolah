import a from"./TopBar-BGXZo-BL.js";import s from"./Sidebar-E_tCyEf2.js";import r from"./Footer-eKAFXjRx.js";import{_ as e,u as o,a as t,b as n}from"./app-CFGDmtZY.js";import{a as i,l,A as u,b as c,f as m,h as p,m as f,r as v,z as d,F as g,o as j}from"./vue-CzxLGHcz.js";import y from"./ProgressBar-uAAbQ5nV.js";import"./UserProfileDropDown-52XnX-vf.js";import"./logo-jago-DWBj5E3U.js";const b={key:0,class:"flex items-center justify-center h-screen"},k={key:1},_={class:"content-wrapper"},w=e({__name:"main",setup(e){const w=u(),h=o(),B=i(!0),x=i("");l(async()=>{await(async()=>{const{ok:a,data:s,error:r}=await t("me");if(!a)return n(r),void w.push({name:"Login"});const{user:e}=s.data;h.setUser({user:e,permissions:e.permissions}),B.value=!1})(),await(async()=>{const{ok:a,data:s}=await t("configurations/background_image");a&&(x.value=`/storage/${s.data.background_image}`)})()});const z=i(null);w.beforeEach((a,s,r)=>{var e;null==(e=z.value)||e.start(),r()}),w.afterEach(()=>{var a;null==(a=z.value)||a.finish()});const A=c(()=>x.value?{backgroundImage:`url(${x.value})`}:{});return(e,o)=>{const t=v("RouterView");return j(),m(g,null,[p(y,{ref_key:"progressBar",ref:z},null,512),B.value?(j(),m("div",b,[...o[0]||(o[0]=[f("span",null,"Loading...",-1)])])):(j(),m("div",k,[p(a),p(s),f("div",{class:"content-area",style:d(A.value)},[o[1]||(o[1]=f("div",{class:"overlay"},null,-1)),f("div",_,[p(t)])],4),p(r)]))],64)}}},[["__scopeId","data-v-e29c4fb3"]]);export{w as default};
