import{b as a,a as e,f as l,o as t,m as s,i as o,g as r,n,F as d,q as c,v as i,h as u,t as m}from"./vue-CzxLGHcz.js";import{_ as p,S as b,e as v,b as y}from"./app-Bqfx2xBk.js";const f={class:"card card-outline card-navy shadow-sm"},h={class:"card-body"},_={class:"row"},g={class:"col-md-12 mb-3"},k={class:"btn-group btn-group-toggle w-100",role:"group"},x={class:"col-md-6"},w={class:"form-group"},T={class:"col-md-6"},F={class:"form-group"},E={key:1,class:"col-md-6"},V={class:"form-group"},C={key:2,class:"col-md-6"},A={key:3,class:"col-md-6"},j=p({__name:"FilterPanel",props:{modelValue:{type:Object,default:()=>({})},showTeacherFilter:{type:Boolean,default:!0},showAcademicYearFilter:{type:Boolean,default:!0}},emits:["update:modelValue","apply","reset"],setup(m,{emit:p}){const v=m,y=p,j=a({get:()=>v.modelValue,set:a=>y("update:modelValue",a)}),P=e("date_range"),$=()=>{y("apply",j.value)},S=()=>{j.value={start_date:"",end_date:"",month:"",academic_year_id:"",teacher_id:""},P.value="date_range",y("reset")};return(a,e)=>(t(),l("div",f,[e[17]||(e[17]=s("div",{class:"card-header"},[s("h3",{class:"card-title font-serif-formal"},[s("i",{class:"fas fa-filter mr-2"}),o(" Filter Laporan ")])],-1)),s("div",h,[s("div",_,[s("div",g,[e[11]||(e[11]=s("label",{class:"form-label"},"Tipe Filter Periode",-1)),s("div",k,[s("button",{type:"button",class:n(["btn","date_range"===P.value?"btn-navy":"btn-outline-secondary"]),onClick:e[0]||(e[0]=a=>P.value="date_range")},[...e[8]||(e[8]=[s("i",{class:"fas fa-calendar-alt mr-1"},null,-1),o(" Range Tanggal ",-1)])],2),s("button",{type:"button",class:n(["btn","month"===P.value?"btn-navy":"btn-outline-secondary"]),onClick:e[1]||(e[1]=a=>P.value="month")},[...e[9]||(e[9]=[s("i",{class:"fas fa-calendar mr-1"},null,-1),o(" Bulanan ",-1)])],2),m.showAcademicYearFilter?(t(),l("button",{key:0,type:"button",class:n(["btn","academic_year"===P.value?"btn-navy":"btn-outline-secondary"]),onClick:e[2]||(e[2]=a=>P.value="academic_year")},[...e[10]||(e[10]=[s("i",{class:"fas fa-graduation-cap mr-1"},null,-1),o(" Tahun Ajaran ",-1)])],2)):r("",!0)])]),"date_range"===P.value?(t(),l(d,{key:0},[s("div",x,[s("div",w,[e[12]||(e[12]=s("label",{for:"start_date"},[s("i",{class:"fas fa-calendar-day mr-1"}),o(" Tanggal Mulai ")],-1)),c(s("input",{id:"start_date","onUpdate:modelValue":e[3]||(e[3]=a=>j.value.start_date=a),type:"date",class:"form-control"},null,512),[[i,j.value.start_date]])])]),s("div",T,[s("div",F,[e[13]||(e[13]=s("label",{for:"end_date"},[s("i",{class:"fas fa-calendar-day mr-1"}),o(" Tanggal Akhir ")],-1)),c(s("input",{id:"end_date","onUpdate:modelValue":e[4]||(e[4]=a=>j.value.end_date=a),type:"date",class:"form-control"},null,512),[[i,j.value.end_date]])])])],64)):r("",!0),"month"===P.value?(t(),l("div",E,[s("div",V,[e[14]||(e[14]=s("label",{for:"month"},[s("i",{class:"fas fa-calendar mr-1"}),o(" Pilih Bulan ")],-1)),c(s("input",{id:"month","onUpdate:modelValue":e[5]||(e[5]=a=>j.value.month=a),type:"month",class:"form-control"},null,512),[[i,j.value.month]])])])):r("",!0),"academic_year"===P.value&&m.showAcademicYearFilter?(t(),l("div",C,[u(b,{modelValue:j.value.academic_year_id,"onUpdate:modelValue":e[6]||(e[6]=a=>j.value.academic_year_id=a),label:"Tahun Ajaran",name:"academic_year_id",placeholder:"Pilih Tahun Ajaran",serverside:!0,endpoint:"academic-years","label-key":"name","value-key":"id"},null,8,["modelValue"])])):r("",!0),m.showTeacherFilter?(t(),l("div",A,[u(b,{modelValue:j.value.teacher_id,"onUpdate:modelValue":e[7]||(e[7]=a=>j.value.teacher_id=a),label:"Filter Guru (Opsional)",name:"teacher_id",placeholder:"Semua Guru",serverside:!0,endpoint:"users?filter[role_id]=2","label-key":"name","value-key":"id"},null,8,["modelValue"])])):r("",!0),s("div",{class:"col-md-12"},[s("button",{type:"button",class:"btn btn-navy shadow-sm",onClick:$},[...e[15]||(e[15]=[s("i",{class:"fas fa-search mr-2"},null,-1),o(" Tampilkan Laporan ",-1)])]),s("button",{type:"button",class:"btn btn-secondary ml-2",onClick:S},[...e[16]||(e[16]=[s("i",{class:"fas fa-redo mr-2"},null,-1),o(" Reset ",-1)])])])])])]))}},[["__scopeId","data-v-f26d7f56"]]),P={class:"export-buttons"},$=["disabled"],S=["disabled"],U=p({__name:"ExportButtons",props:{filters:{type:Object,default:()=>({})},reportType:{type:String,required:!0}},setup(a){const r=a,n=e(!1),d=async()=>{n.value=!0;try{const a=new URLSearchParams(r.filters).toString(),e=`https://adajago.com/api/v1/reports/${r.reportType}/export-pdf?${a}`,l=document.createElement("a");l.href=e,l.setAttribute("download",`laporan-${r.reportType}-${Date.now()}.pdf`),l.setAttribute("target","_blank"),document.body.appendChild(l),l.click(),document.body.removeChild(l),v("Export PDF berhasil!")}catch(a){y("Gagal export PDF: "+a.message)}finally{n.value=!1}},c=async()=>{n.value=!0;try{const a=new URLSearchParams(r.filters).toString(),e=`https://adajago.com/api/v1/reports/${r.reportType}/export-excel?${a}`,l=document.createElement("a");l.href=e,l.setAttribute("download",`laporan-${r.reportType}-${Date.now()}.xlsx`),document.body.appendChild(l),l.click(),document.body.removeChild(l),v("Export Excel berhasil!")}catch(a){y("Gagal export Excel: "+a.message)}finally{n.value=!1}};return(a,e)=>(t(),l("div",P,[s("button",{type:"button",class:"btn btn-danger shadow-sm",disabled:n.value,onClick:d},[e[0]||(e[0]=s("i",{class:"fas fa-file-pdf mr-2"},null,-1)),o(" "+m(n.value?"Exporting...":"Export PDF"),1)],8,$),s("button",{type:"button",class:"btn btn-success shadow-sm ml-2",disabled:n.value,onClick:c},[e[1]||(e[1]=s("i",{class:"fas fa-file-excel mr-2"},null,-1)),o(" "+m(n.value?"Exporting...":"Export Excel"),1)],8,S)]))}},[["__scopeId","data-v-b8ce367e"]]);export{U as E,j as F};
