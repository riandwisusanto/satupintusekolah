const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormRole-BXml0GqY.js","assets/vue-3FdbM0aa.js","assets/vue-G0OklSQi.css","assets/FormInput-BYt7LusU.js","assets/app-dRKbozfU.js","assets/app-DME1HvDB.css","assets/FormInput-AW6_rvBH.css","assets/FormRole-XxfxysMz.css"])))=>i.map(i=>d[i]);
import{c as e,f as s,a,d as l,b as t,e as n}from"./app-dRKbozfU.js";import{a as o,f as i,h as r,s as d,q as c,j as u,t as p,r as v,x as b,G as f,F as m,o as h}from"./vue-3FdbM0aa.js";const y={class:"content"},g={class:"card"},k={class:"position-relative"},_={key:0},w={key:1},x={class:"btn-group"},C=["onClick"],R=["onClick"],j={__name:"index",setup(j){const A=f(()=>n(()=>import("./FormRole-BXml0GqY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),D=o();e();const P=o(!1),S=o(null),E=o(!1),F=[{field:"label",display:"Role"},{field:"users",display:"Pengguna",sortable:!1},{field:"action",display:"Action",sortable:!1}],O=()=>{S.value=null,P.value=!0},T=async e=>{s("save").then(async s=>{var n;if(s.isConfirmed){E.value=!0;let s="roles";e.id&&(s=`roles/${e.id}`);const{ok:o,data:i,error:r}=await a(s,{method:e.id?"put":"post",body:{name:e.label,permissions:e.permissions}});o?(l("Role berhasil "+(e.id?"diubah":"ditambahkan")),P.value=!1,null==(n=D.value)||n.reload()):t(r),E.value=!1}})};return(e,n)=>{const o=v("TableServerSide");return h(),i(m,null,[n[3]||(n[3]=r("section",{class:"content-header"},[r("h5",{class:"text-center"},"Developer Permission")],-1)),r("section",y,[r("div",g,[r("div",k,[d(o,{ref_key:"tableRef",ref:D,title:"","show-add-button":!0,"show-drawer":!0,columns:F,"initial-sort":{field:"code",order:"desc"},per_page:10,endpoint:"roles",extra:{with:"users,permissions"},loading:E.value,onOpenDrawer:O},{"cell-users":c(({row:e})=>[0==e.users.length?(h(),i("span",_,"-")):(h(),i("span",w,p(e.users.length),1))]),"cell-action":c(({row:e})=>[r("div",x,[r("button",{class:"btn btn-primary btn-sm",type:"button",onClick:u(s=>(e=>{S.value=e,P.value=!0})(e),["stop","prevent"])},[...n[1]||(n[1]=[r("i",{class:"fas fa-edit"},null,-1)])],8,C),r("button",{class:"btn btn-danger btn-sm",type:"button",onClick:u(n=>(async e=>{s("delete").then(async s=>{var n;if(s.isConfirmed){const{ok:s,data:o,error:i}=await a(`roles/${e}`,{method:"delete"});s?(l("Role berhasil dihapus"),null==(n=D.value)||n.reload()):t(i)}})})(e.id),["stop","prevent"])},[...n[2]||(n[2]=[r("i",{class:"fas fa-trash"},null,-1)])],8,R)])]),_:1},8,["loading"]),d(b(A),{visible:P.value,"onUpdate:visible":n[0]||(n[0]=e=>P.value=e),selected:S.value,class:"fixed top-0 right-0 z-50",onSave:T},null,8,["visible","selected"])])])])],64)}}};export{j as default};
